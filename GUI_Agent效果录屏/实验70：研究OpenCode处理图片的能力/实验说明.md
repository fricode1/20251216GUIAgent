# 实验背景

我的GUI Agent要基于OpenCode，因为这是最先进的智能体，而且能扩展到操作桌面的能力。

# 实验目的

研究 OpenCode 处理图片的能力

# 实验步骤

## https://docs.z.ai/devpack/mcp/vision-mcp-server#opencode

此 Local MCP Server 是 Z.AI 为GLM 编码计划用户开发的专属服务器，它赋予您的代码代理眼睛和无限的视觉理解能力。

配置方法：

```json
{
    "$schema": "https://opencode.ai/config.json",
    "mcp": {
        "zai-mcp-server": {
            "type": "local",
            "command": ["npx","-y","@z_ai/mcp-server"],
            "environment": {
                "Z_AI_API_KEY": "your_api_key",
                "Z_AI_MODE": "ZAI"
            }
        }
    }
}
```

### 获取智谱 API Key

https://bigmodel.cn/usercenter/proj-mgmt/apikeys

c8f0c58aba1fad293a8ca62f4cb7942d.Zxxt5g3FX1cuiCuo

```json
{
    "$schema": "https://opencode.ai/config.json",
    "mcp": {
        "zai-mcp-server": {
            "type": "local",
            "command": ["npx","-y","@z_ai/mcp-server"],
            "environment": {
                "Z_AI_API_KEY": "c8f0c58aba1fad293a8ca62f4cb7942d.Zxxt5g3FX1cuiCuo",
                "Z_AI_MODE": "ZAI"
            }
        }
    }
}
```

### 复制到opencode 配置文件中

成功

## 测试运行效果

这张图片展示了一份中式早餐场景，包含丰富多样的食物，并带有拍摄时间与地点信息。画面左侧有一碗黄色粥品和两根绿色筷子，右侧白色餐盘中摆放着煮鸡蛋、红薯块、玉米块、饺子（或蒸包）、炒豆角及卤鸡肉块，整体呈现均衡的早餐搭配。
食物细节：
- 餐盘中的食物包括：一颗带褐色外壳的煮鸡蛋；一块切开的红薯；一段玉米；一个白色蒸制面点；一盘炒制的长豆角；三块卤制鸡肉
- 左侧小碗中是浅黄色的粥
文字信息：
图片左上角显示：
- 时间：08:46
- 日期：2025-08-03 星期日
- 地点：河北省沧州市运河区新华东路28号OYO鑫隆泰商务酒店
器具与背景：
- 餐具为白色瓷碗和白色餐盘
- 背景是木质纹理的桌面，光线明亮，食物摆放整齐

成功

## 测试元素定位能力

能出结果

## 让 opencode 分析百度js交互逻辑代码

超上下文

## 让 claude 分析百度js交互逻辑代码

上传文件元素和上传图像元素除了svg外完全一样。但它们是不同对象：

const buttons = document.querySelectorAll('.tool-item_1e6GD');
console.log(buttons[0] === buttons[1]); // false - 它们是不同的对象

# 实验结果

靠图像太慢了