# 实验背景

标签页跳转是浏览器自动化中一项重要功能。这和显式指定先进入网页A再进入网页B不同，无法预先告诉agent你应该跳转到哪个标签页。因此这是一项高智能任务

# 实验目的

通过prompt引导agent，点击查询按钮后，12306会打开新的标签页。希望agent能自动跳转到这个新的标签页。

# 实验步骤

## 写提示词

1. 进入 12306.cn
2. 在出发地文本框填入 北京北
3. 在下拉列表中点击 北京北
4. 在到达地文本框填入 怀柔北
5. 在下拉列表中点击 怀柔北
6. 在出发日期文本框填入 2025-12-31（绝对不要click出发日期文本框，而是直接填入）
7. 点击查询按钮。
8. 点击后，12036网站会自动打开一个新的标签页。你要跳转到这个新的标签页进行后续操作。
9. 点击 4471 次列车的预定按钮
10. 勾选乘车人 李振邦
11. 点击 提交订单按钮

## 将提示词复制到代码中

已完成

## 找出创建后台浏览器的方法

```bash
chromium --remote-debugging-port=9222
```

运行该命令，会得到监听地址，如：`ws://[::1]:9222/devtools/browser/7119b24e-4638-4d1f-89ec-06fae1f66be5`

## 客户端访问该浏览器

```python
cdp_url = 'ws://127.0.0.1:9222/devtools/browser/6de34a82-8b00-4fd6-a50c-4efc93cc6a09'
browser = Browser(cdp_url=cdp_url)
```

## 确认录屏命令

```bash
cd /home/zhbli/projects/20251216GUIAgent/GUI_Agent效果录屏/实验29：通过prompt引导agent跳转到正确标签页
ffmpeg -f x11grab -framerate 30 -s 1920x1080 -i :0.0 实验29.mp4
```

## 确认自动化操作命令

```bash
conda activate browser_use_py312
cd /home/zhbli/projects/20251216GUIAgent/GUI_Agent效果录屏/实验29：通过prompt引导agent跳转到正确标签页
python my_browser_use.py
```

# 实验结果

12306的登录机制非常变态。就算始终处于同一个浏览器实例，几分钟后就让我重新登陆。所以放弃12306演示。