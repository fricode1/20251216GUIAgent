# 实验背景

实验9单步到一段纯文本js代码，无法继续调试。在控制台会直接导致文本框蓝色消失。所以需要通过cdp_use代码运行。

# 实验目的

通过 cdp_use 运行 js 代码：

`const el = document.getElementById('train_date');`

## 实验步骤

## 让大模型生成代码

```
js_code = """
    (function() {
        const el = document.getElementById('train_date');
        if (el) {
            el.style.backgroundColor = 'yellow'; // 变色以便肉眼观察
            console.log('JS 成功找到元素:', el);
            return '成功找到元素，ID为: ' + el.id + ', 当前值为: ' + el.value;
        } else {
            return '未找到 ID 为 train_date 的元素';
        }
    })()
    """

    eval_response = await cdp.send.Runtime.evaluate({
        "expression": js_code,
        "returnByValue": True  # 设为 True 才能直接拿到返回的字符串
    }, session_id=sid)
```

有效

## 进一步增加js内容

`const hasContentEditable = this.getAttribute('contenteditable') === 'true' || this.getAttribute('contenteditable') === '' || this.isContentEditable === true;`