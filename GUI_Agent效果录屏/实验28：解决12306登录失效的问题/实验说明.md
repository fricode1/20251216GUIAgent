# 实验背景

不同网站对于维持登录状态的严格程度不同。有的网站根本不需要登录。有的网站登录之后，就算关闭网页再打开，登录也有效。有的网站登录之后，关闭网页再打开就需要重新登录。有的网站登录后，在新窗口打开就需要重新登陆。有的网页登录后，在标签页打开就需要重新登录。

12306 网站的登录机制：我在一个浏览器实例进行了登录。可是browser use会打开新的浏览器实例进入12306。预定时又让我重新登录。而此时原来的浏览器实例还在维持着登录状态。因此我能做的是让browser use在同一个浏览器实例进行自动化操作，而非打开新的浏览器实例。

# 实验目的

让browser use在已经打开的浏览器实例进行自动化操作。

# 实验步骤

## 找出创建后台浏览器的方法

```bash
chromium --remote-debugging-port=9222
```

运行该命令，会得到监听地址，如：`ws://[::1]:9222/devtools/browser/7119b24e-4638-4d1f-89ec-06fae1f66be5`

## 客户端访问该浏览器

```python
cdp_url = 'ws://127.0.0.1:9222/devtools/browser/6de34a82-8b00-4fd6-a50c-4efc93cc6a09'
browser = Browser(cdp_url=cdp_url)
```

## 确认录屏命令

```bash
cd /home/zhbli/projects/20251216GUIAgent/GUI_Agent效果录屏/实验28：解决12306登录失效的问题
ffmpeg -f x11grab -framerate 30 -s 1920x1080 -i :0.0 实验28.mp4
```

## 确认自动化操作命令

```bash
conda activate browser_use_py312
cd /home/zhbli/projects/20251216GUIAgent/GUI_Agent效果录屏/实验28：解决12306登录失效的问题
python my_browser_use.py
```

# 实验结果

跳转标签页错误。需要优化提示词，跳转到正确的标签页。