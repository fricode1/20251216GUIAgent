# 实验背景

我做过一次汇报，听众指出，目前的工作创新性不足。我想到了具有创新性的方式。我要做成PPT。因为会有下一步汇报。

# 实验目的

做创新点PPT

# 实验步骤

## 记录创新点

标题：基于语义拓扑地图重建的 Web Agent 架构研究

## 现状分析

把一个网站比作一个N叉树地图（虽然本质上是graph，但tree更符合直觉）。

### agent如何行动

agent在每一个分支路口,都要观察,分析,才能前进一步。

优点：不必为每个任务写rpa脚本。
缺点1:太慢。每前进一步都要调用一次大模型。
缺点2:只在局部探索,会迷路。目前的 Agent 是在每一个 Step 都在做概率预测。

### rpa如何行动

人直接告诉rpa怎么走。

优点:正确性。速度快。
缺点:每个任务都要写rpa.

## 解决方案

结合agent和rpa。把完整地图告诉agent,agent仅调用一次大模型,生成rpa脚本。

这就好比从“在一个陌生城市里靠直觉摸索”转变成了“先进行城市地图测绘，再根据地图进行导航”。
现在的agent
- 就像是一个初次来到异国他乡的游客。他能看懂路标（识别按钮），但他脑子里没有这张城市的全局地图。
- 每走到一个十字路口，他都要停下来分析路标 A、B、C 分别代表什么，然后猜测“去火车站应该走左边”。
- 他可能走进了死胡同，或者在原地绕圈。最关键的是，下一次他再去火车站，他还得重新分析一遍，因为他没有把路径固化下来。

构建地图：任务不是为了从 A 点到 B 点，而是为了跑遍全城的每一条路。

RPA：严格执行导航指令的自动驾驶车。它不需要理解为什么左转，它只需要接收指令：Drive(500m) -> TurnLeft -> Stop。速度极快：因为它跳过了所有“思考”和“分析路标”的时间，直接全速前进。

优点：不必为每个任务写rpa。正确性。速度快。
研究点：为网站构建完整地图。

## 如何构建地图

开发一个专门用于构建网站地图的智能体。它不执行具体任务，只负责在网站上到处点，并把所有的节点、按钮、输入框及其关系记录在图数据库（如Neo4j）中。

自动遍历网站所有功能点，记录 Action -> New State 的映射关系。
- 定义 DSL（领域特定语言），描述 (State A) --[Action(input/click)]--> (State B)。

自动探索与人工标注相结合。AI自动识别每个网页元素的语义。标注员能够进行检查和校正。
- 靠人工处理“依赖数据的路径”。例如：只有输入了正确的订单号，才会出现“退款”按钮。
    - 在图数据库的边（Edge）上增加 Pre-condition（前提条件） 属性。例如，“退款”按钮的边上标注 {needs: "order_id"}。
- 当自动探索失败时，自动通知标注员介入。人工点一下，系统自动记录这次“纠偏”，更新地图。
    - （构建地图的过程中，是允许探索和出错的，但实际运行流程自动化时，不行。）

## 架构

分为两个核心组件：
- Cartographer（绘图员）： 负责遍历网站，构建语义图数据库。
    - 本质是在逆向工程网站的业务逻辑状态机。
- Navigator（导航员）： 接收任务，查询图数据库，一次性生成 RPA 脚本。

### Cartographer（绘图员）

盲目遍历会导致陷入“死循环”（如万年历组件）。需要利用AI对网站的语义理解能力，优先点击有意义的元素。

### Navigator（导航员）

- 意图理解： 用户输入“我买的鼠标不好用，退钱。”。
    - 用户说“退钱”，地图上叫“申请售后”。Navigator利用AI的语义理解能力，能够正确识别用户的意图。
- 图路径查找： 在 Neo4j 中查找从首页到下载页的最短语义路径。
- RPA 生成： 将路径转化为 Python(DrissionPage) 代码一次性执行。

## 意义

- 当拥有了数百个政务系统的完整地图时，这本身就是巨大的数据资产。
    - 可进行跨业务系统的流程自动化。
- 当拥有了网站的完整地图时，相当于为通用大模型注入了领域专业知识。地图本身就是模型能力的补丁。