# 实验背景

函数调用与代码生成是 agent 行动的两种方式。我直觉上认为代码生成更好。我需要证据

# 实验目的

对比函数调用与代码生成

# 实验步骤

## 论文阅读：GeoJSON Agents: A Multi-Agent LLM Architecture for Geospatial Analysis — Function Calling vs Code Generation

我是如何发现这篇论文的：问kimi2.5：调研文献：agent不调用工具，而直接生成代码。

我是如何阅读这篇文章的：arxiv只有pdf版本，不好翻译，https://www.tandfonline.com/doi/full/10.1080/20964471.2026.2615511#d1e345 是网页版，能直接翻译。

如下是论文内容摘抄：

目前，驱动智能体主要有两种执行策略：函数调用和代码生成。2023年6月，OpenAI 引入了“函数调用”的概念，即为逻辑逻辑模型 (LLM) 提供一组预定义的函数接口，使其能够调用外部函数或服务。

代码生成方法使智能体能够基于自然语言描述生成定制代码。

本研究旨在探索将 GeoJSON 与基于 LLM 的多智能体架构集成，并**评估函数调用和代码生成在地理空间任务中的有效性**。

架构由两个关键组件构成：规划器和执行器（worker）。规划器负责解析用户意图并分解任务，而执行器则通过预定义的函数调用或动态生成的 Python 代码来执行任务。

我们还研究了两种 GeoJSON 代理（基于函数调用和代码生成）在处理不同复杂度的地理空间任务时的性能差异。实验结果表明，基于函数调用的 GeoJSON 代理的任务准确率达到 85.71%，而基于代码生成的代理则达到 97.14%。

本研究提出了一种基于GeoJSON的智能体，它采用规划器-工作者架构，是一种真正的**多智能体**框架。多智能体架构将复杂任务分解为不同的功能模块，这些模块由具有特定角色和职责的独立智能体执行。

通用 LLM 缺乏直接与外部信息或特定领域工具交互的固有能力。

函数调用方法（也称为工具增强）通过预定义的 API 接口，实现了智能体与外部工具之间的高效交互。具体来说，智能体在解析用户的自然语言指令后，识别出要调用的相应函数，构建参数结构（例如，JSON 格式），并调用外部系统来执行任务并返回结果。

与函数调用方法不同，代码生成方法使智能体能够直接将自然语言指令翻译成可执行代码。通过动态生成程序代码（例如 Python），智能体可以完成用户定义的任务。

在人工智能领域，智能体是指能够感知环境、做出决策并采取行动以实现特定目标的自主系统。

基于函数调用的GeoJSON代理利用了一个包含40个API的 closed library。

基于代码生成的GeoJSON代理使工作代理能够动态生成Python代码。

在数据格式层面，本研究统一且唯一地采用 GeoJSON 作为所有任务案例的唯一数据格式。之所以选择 GeoJSON 格式，是因为它与 LLM 驱动的自动化工作流程具有高度兼容性。

GeoJSON代理的规划器-工作器架构建立了清晰的分工和协作机制。规划器代理专注于高层次的任务理解、分解和动态规划。它不直接操作数据或调用工具；而是将模糊的用户指令转化为定义明确的子任务序列，并将其传递给工作器代理。工作器代理则专注于底层操作，例如函数调用或代码生成。它在隔离的执行环境中执行具体的地理空间操作，并将结果返回给规划器。

基本任务：本类别包含 40 个案例，旨在模拟原子级、单步空间分析操作。每个案例通常仅包含一到两个子任务，旨在评估模型精确解释和执行基本地理空间任务的能力。

中间任务：本级别包含 20 个案例。

高级任务：本类别包含 10 个案例。

在本研究中，“工具”是一个关键变量：在基于函数调用的模型中，它指的是预定义的函数库（API）；在基于代码生成的模型中，它指的是能够执行动态生成脚本的Python代码解释器。

工作代理使用execute_code工具生成并运行Python脚本。如果执行失败，工作代理会自主分析错误信息，修改代码并重新执行——最多尝试五次。

在基于函数调用的 GeoJSON 代理中，这些约束确保了函数调用的标准化和可预测性。

结果表明，基于代码生成的GeoJSON代理在所有复杂任务上的表现都更好。（85.71% v.s. 97.14%）

完成全部 70 个任务，函数调用方法的成本约为 28.22 美元，代码生成方法的成本约为 12.26 美元，后者显然更具成本优势。

一作：Zhejiang Agriculture and Forestry University

发表于：Big Earth Data。大类分区：地球科学 1区（Top期刊）。该期刊近年来实现了连升3区的显著跃升。

思考：函数调用和代码生成是两种泾渭分明的agent行动方法。如果一个动作是简单的，能用一两行代码表示的，则用代码生成。如果一个动作对应一个复杂的封装好的功能，则用工具调用。这本就是我的知觉。这篇文章验证了我的直觉。

# 实验结果

我的直觉得到了验证——代码生成是个好方法。