# 实验背景

因为我要知道没有正确填入日期是不是由于当时文本框没有焦点导致的，所以我需要知道如何通过 cdp_use 执行js获取页面焦点

# 实验目的

通过 cdp_use 执行js获取页面焦点

# 实验步骤

## 准备代码

```python
result = await cdp.send.Runtime.evaluate({
    "expression": """
        (function() {
            const focused = document.activeElement;
            if (!focused) return null;
            // 返回焦点元素的标签名、ID 和类名
            return {
                tagName: focused.tagName,
                id: focused.id,
                className: focused.className,
                outerHTML: focused.outerHTML.substring(0, 100)  // 截取部分 HTML
            };
        })()
    """,
    "returnByValue": True
}, session_id=sid)

if result["result"]["value"]:
    focused_info = result["result"]["value"]
    print("当前焦点元素信息：")
    print(f"标签名: {focused_info['tagName']}")
    print(f"ID: {focused_info['id']}")
    print(f"类名: {focused_info['className']}")
    print(f"HTML 片段: {focused_info['outerHTML']}")
else:
    print("当前无焦点元素")
```

可以获得焦点信息。

# 实验结果

成果找到通过代码获取页面聚焦元素的方法。

# 下一步计划

精简上述代码方便调试。