# 流程自动化交互界面

这是一个用于交互式执行流程自动化的 Web 界面。

## 功能特点

- **流式卡片展示**：左侧以卡片形式展示所有生成的动作
- **交互式执行**：每个卡片都有执行按钮，可以单独执行
- **详情查看**：右侧展示选中卡片的详细信息
- **实时状态**：动作状态实时更新（待执行、执行中、已完成、失败）

## 界面布局

### 左侧面板
- **初始化区域**：输入目标网址和任务描述
- **动作卡片列表**：流式展示所有生成的动作
  - 卡片显示动作描述和状态
  - 点击卡片查看详情
  - 执行按钮触发动作
- **生成按钮**：生成下一步动作

### 右侧面板
- **生成的代码**：显示大模型生成的 Python 脚本
- **DOM 快照**：显示精简的页面 DOM 内容

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行方式

```bash
python web_interface.py
```

然后在浏览器中访问：`http://localhost:5000`

## 使用流程

1. **初始化**
   - 输入目标网址（如：https://www.12306.cn）
   - 输入任务描述（如：订一张从泰安到深圳的火车票）
   - 点击"初始化"按钮

2. **生成动作**
   - 点击"生成下一步动作"按钮
   - 系统会调用大模型生成下一步操作
   - 新的动作卡片会出现在左侧列表

3. **查看详情**
   - 点击任意卡片查看详情
   - 右侧会显示生成的代码和 DOM 快照

4. **执行动作**
   - 点击卡片上的"执行"按钮
   - 系统会执行该动作
   - 卡片状态会实时更新

5. **继续流程**
   - 执行完一个动作后，可以继续生成下一步
   - 重复步骤 2-4，直到完成整个流程

## API 接口

- `POST /api/init` - 初始化自动化流程
- `POST /api/generate_next` - 生成下一个动作
- `POST /api/execute/<action_id>` - 执行指定动作
- `GET /api/actions` - 获取所有动作列表
- `GET /api/action/<action_id>` - 获取动作详情
- `POST /api/close` - 关闭自动化

## 技术栈

- **后端**：Flask + Python
- **前端**：原生 HTML/CSS/JavaScript
- **自动化**：DrissionPage
- **AI**：智谱 AI（通过 script_generator.py）

## 注意事项

- 确保已安装 Chrome 浏览器
- 确保智谱 AI API 密钥配置正确
- 每次执行动作后，页面 DOM 会发生变化，需要重新生成下一步动作
