# 实验背景

有说明书还是很有必要的。要是不让AI解读说明书指导我操作，我都不知道要怎么干。只有丰富经验的专家会干。但是基层民警不会干。

所以说，说明书是有意义的。怎么将说明书的内容让插件调用呢？要从 agent 的流程中开一个口子。

但是，如果我只是简单问一下今天的天气呢？这就是planner该做的事情：调用天气接口，还是查看说明书进而生成操作步骤？

接下来有了步骤，去执行，才是浏览器agent的事情。

我该了解一下agent的流程是怎么做的，才能知道怎么改造planner。知道怎么改造planner，才知道怎么加后端，怎么用agent。

所以，无论如何，我还是得看看代码。不懂代码，无从下手。目的是知道怎么引向后端。

# 实验目的

了解代码。

# 实验步骤

## 确认读哪份代码

https://github.com/browseros-ai/BrowserOS-agent

## 代码架构

```TypeScript
BrowserOS-agent/
    src/    # 源代码主目录
        lib/    # 核心功能库     
            agent/
                BrowserAgent.ts
                    _runPredefinedPlanner()
                        userPrompt = `Current TODO List:
                            ${currentTodos}
                            EXECUTION METRICS:
                            - Tool calls: ${metrics.toolCalls} (${metrics.errors} errors, ${errorRate}% failure rate)
                            - Observations taken: ${metrics.observations}
                            - Time elapsed: ${(elapsed / 1000).toFixed(1)} seconds
                            ${parseInt(errorRate) > 30 && metrics.errors > 3 ? "⚠️ HIGH ERROR RATE - Current approach may be failing. Learn from the past execution history and adapt your approach" : ""}
                            ${executionContext}
                            YOUR PREVIOUS STEPS DONE SO FAR (what you thought would work):
                            ${fullHistory}
                            `;
                BrowserAgent.prompt.ts  # 提示词
                    function generatePlannerPrompt()  # 生成可执行的步骤
                        "You do NOT perform actions yourself. Your role is to propose clear, actionable next steps for the EXECUTOR AGENT"
                    function generateExecutorPrompt()
                    function generateExecutionHistorySummaryPrompt()
                    function generateExecutionHistorySummaryPrompt()    
                
```

只看代码有点难。如果能够发现调用关系就好了。如果能够debug的话，还能知道出错的原因。可是，如何debug TS 代码呢？已经弄懂了。

中止。我意识到同事希望我做的方案究竟是什么意思。绝不是从代码层面。

# 实验结果

中止。